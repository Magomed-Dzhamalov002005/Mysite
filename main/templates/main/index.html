{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- custom styles -->
    <link rel="stylesheet" href="{% static 'main/css/style.css' %}">
    <script src="{% static 'main/js/script.js' %}" defer></script>
    {% block style %}{% endblock %}

    <title>Document</title>
</head>
<body>
    {% block header %}
    <!-- header -->
    <header>
        <div class="list-header">
            <div class="brand">
                <a href="{% url 'main:home' %}" class="text-decoration-none"><h2 class="navbar-brand fs-2" style="margin:0;padding:0;">Mysite!</h2></a>
                <span>It's my first site on python</span>
            </div>
            <button id="menuToggler">M</button>
        </div>
        <section id="menu">
            <button id="themeLight" class="light">light</button>
            <button id="themeDark" class="dark">dark</button>
            <ul>
                {% if user.is_authenticated %}
                <li><a href="#">{{request.user.username}}</a></li>
                {% else %}
                <li><a href="#">Not logged in</a></li>
                {% endif %}
            </ul>
            <form action="{% url 'main:home' %}" method="GET">
                <input type="search" name="search-query" placeholder="Search">
                <button type="submit">Search</button>
            </form>
        </section>
    </header>
                
    {% endblock %}


    {% block aside %}
    <!-- sidebar -->

    <aside>
        <h2>Navbar / name</h2>
        <ul>
            {% if user.is_authenticated %}
            <li><a href="{% url 'cabinet:studio' user.username %}">My Cabinet</a></li>
            <li><a href="{% url 'auth:logout' %}">Log Out</a></li>
            {% else %} 
            <li><a href="{% url 'auth:login' %}">Log In</a></li>
            <li><a href="{% url 'auth:signup' %}">Sign Up</a></li>
            {% endif %}
        </ul>
    </aside>

    {% endblock %}


    {% block content %}
    <!-- main-block -->

    <main>
        {% if searchResult %}
            {% for p in searchResult %}
            <article>
                {% if p.image %}<img src="{{ p.image.url }}">{% else %}<img src="">{% endif %}
                <div class="card">
                    <a href="{% url 'main:post' p.slug %}"><h3 class="card-brand">{{ p.name }}</h3></a>
                    <p>{{ p.text }}</p>
                    <i>{{ p.date }}</i>
                    <i>{{ p.views }} views</i>
                </div>
            </article>
            {% endfor %}
        {% else %}
            {% for p in posts %}
            <article>
                {% if p.image %}<img src="{{ p.image.url }}">{% else %}<img src="">{% endif %}
                <div class="card">
                    <a href="{% url 'main:post' p.slug %}"><h3 class="card-brand">{{ p.name }}</h3></a>
                    <p>{{ p.text }}</p>
                    <i>{{ p.date }}</i>
                    <i>{{ p.views }} views</i>
                </div>
            </article>
            {% endfor %}
        {% endif %}
    </main>
         
    {% endblock %}

    {% block comments %}


    {% endblock %}


    {% block footer %}
    <!-- footer -->
    
    <footer>
        <p>2025. Site with html&css grid and flexbox layouts.</p>
    </footer>

    {% endblock %}

</body>
</html>