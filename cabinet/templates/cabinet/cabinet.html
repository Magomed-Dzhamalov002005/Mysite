{% extends "main/index.html" %}
{% load static %}
{% block style %}
    <!-- custom styles -->
    <link rel="stylesheet" href="{% static 'cabinet/css/cabinet.css' %}">
    <script src="{% static 'cabinet/script.js' %}" defer></script>
{% endblock %}

{% block content %}
<!-- main-block -->
<main>
    {% if messages %}{% for m in messages %}{{ m }}{% endfor %}{% endif %}
    
    <h1>Hello, {{user.username}}!</h1>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <h2>Create a post!</h2>
        {{form.as_p}}
        <div><button type="submit" name="postCreatingForm" value="1">Create</button></div>
    </form>

    <h2>Your Posts:</h2>
    {% for p in posts %}
        <div class="cab-post">
            <a href="{% url 'main:post' p.slug %}"><h3>{{ p.name }}</h3></a>
            <form method="POST">{% csrf_token %}<div><button type="submit" name="deletePost" value="{{p.pk}}">Delete</button></div></form>
        </div>
    {% endfor %}

    <form method="POST" class="deleteForm">
        {% csrf_token %}
        <div><button type="submit" name="deleteAccount" value="1">Delete Account</button></div>
    </form>
</main>
{% endblock content %}